import{c as N,d as P,u as oe,J as T,K as le,L as Y,a as l,n as w,M as pe,e as _e,O as ve,P as B,f as ie,Q as V,R as be,g as W,T as Ce,w as F,U as q,m as L,V as Z,W as ee,X as $e,A as z,E as K,Y as te,Z as ne,$ as ae,a0 as ke,a1 as ye,a2 as j,a3 as Ve,a4 as Pe,_ as ue,a5 as Se,i as k,j as p,F as I,l as H,o as C,t as D,H as x,a6 as se,a7 as Le,a8 as we,a9 as Be,aa as De,ab as Ie,ac as xe,ad as Ne,ae as Ee,N as Te,y as Fe,af as Ae,C as Oe,ag as Re,ah as Ge,k as b,ai as Me,p as Ue}from"./index.25338a1d.js";const[re,ze]=N("checkbox-group"),Ke={max:w,disabled:Boolean,iconSize:w,direction:String,modelValue:pe(),checkedColor:String},ce=Symbol(re);P({name:re,props:Ke,emits:["change","update:modelValue"],setup(e,{emit:n,slots:i}){const{children:m,linkChildren:g}=oe(ce),u=t=>n("update:modelValue",t),s=(t={})=>{typeof t=="boolean"&&(t={checked:t});const{checked:o,skipDisabled:r}=t,f=m.filter(d=>d.props.bindGroup?d.props.disabled&&r?d.checked.value:o!=null?o:!d.checked.value:!1).map(d=>d.name);u(f)};return T(()=>e.modelValue,t=>n("change",t)),le({toggleAll:s}),Y(()=>e.modelValue),g({props:e,updateValue:u}),()=>{var t;return l("div",{class:ze([e.direction])},[(t=i.default)==null?void 0:t.call(i)])}}});const[je,We]=N("checkbox"),He=_e({},ve,{bindGroup:B});var Ye=P({name:je,props:He,emits:["change","update:modelValue"],setup(e,{emit:n,slots:i}){const{parent:m}=ie(ce),g=t=>{const{name:o}=e,{max:r,modelValue:_}=m.props,f=_.slice();if(t)!(r&&f.length>=r)&&!f.includes(o)&&(f.push(o),e.bindGroup&&m.updateValue(f));else{const d=f.indexOf(o);d!==-1&&(f.splice(d,1),e.bindGroup&&m.updateValue(f))}},u=V(()=>m&&e.bindGroup?m.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),s=(t=!u.value)=>{m&&e.bindGroup?g(t):n("update:modelValue",t)};return T(()=>e.modelValue,t=>n("change",t)),le({toggle:s,props:e,checked:u}),Y(()=>e.modelValue),()=>l(Ce,W({bem:We,role:"checkbox",parent:m,checked:u.value,onToggle:s},e),be(i,["default","icon"]))}});const qe=F(Ye),[de,Xe]=N("row"),me=Symbol(de),Je={tag:q("div"),wrap:B,align:String,gutter:L(0),justify:String};var Qe=P({name:de,props:Je,setup(e,{slots:n}){const{children:i,linkChildren:m}=oe(me),g=V(()=>{const s=[[]];let t=0;return i.forEach((o,r)=>{t+=Number(o.span),t>24?(s.push([r]),t-=24):s[s.length-1].push(r)}),s}),u=V(()=>{const s=Number(e.gutter),t=[];return s&&g.value.forEach(o=>{const r=s*(o.length-1)/o.length;o.forEach((_,f)=>{if(f===0)t.push({right:r});else{const d=s-t[_-1].right,S=r-d;t.push({left:d,right:S})}})}),t});return m({spaces:u}),()=>{const{tag:s,wrap:t,align:o,justify:r}=e;return l(s,{class:Xe({[`align-${o}`]:o,[`justify-${r}`]:r,nowrap:!t})},{default:()=>{var _;return[(_=n.default)==null?void 0:_.call(n)]}})}}});const[Ze,et]=N("col"),tt={tag:q("div"),span:L(0),offset:w};var nt=P({name:Ze,props:tt,setup(e,{slots:n}){const{parent:i,index:m}=ie(me),g=V(()=>{if(!i)return;const{spaces:u}=i;if(u&&u.value&&u.value[m.value]){const{left:s,right:t}=u.value[m.value];return{paddingLeft:s?`${s}px`:null,paddingRight:t?`${t}px`:null}}});return()=>{const{tag:u,span:s,offset:t}=e;return l(u,{style:g.value,class:et({[s]:s,[`offset-${t}`]:t})},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}})}}});const at=F(nt),[st,ot]=N("divider"),lt={dashed:Boolean,hairline:B,contentPosition:q("center")};var it=P({name:st,props:lt,setup(e,{slots:n}){return()=>{var i;return l("div",{role:"separator",class:ot({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(i=n.default)==null?void 0:i.call(n)])}}});const ut=F(it),rt=F(Qe),[ct,O]=N("stepper"),dt=200,mt=600,R=(e,n)=>String(e)===String(n),ht={min:L(1),max:L(1/0),name:L(""),step:L(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:B,showMinus:B,showInput:B,longPress:B,allowEmpty:Boolean,modelValue:w,inputWidth:w,buttonSize:w,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:L(1),decimalLength:w};var gt=P({name:ct,props:ht,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:n}){const i=a=>{const{min:h,max:$,allowEmpty:A,decimalLength:v}=e;return A&&a===""||(a=ne(String(a),!e.integer),a=a===""?0:+a,a=Number.isNaN(a)?+h:a,a=Math.max(Math.min(+$,a),+h),ae(v)&&(a=a.toFixed(+v))),a},m=()=>{var a;const h=(a=e.modelValue)!=null?a:e.defaultValue,$=i(h);return R($,e.modelValue)||n("update:modelValue",$),$};let g;const u=Z(),s=Z(m()),t=V(()=>e.disabled||e.disableMinus||s.value<=+e.min),o=V(()=>e.disabled||e.disablePlus||s.value>=+e.max),r=V(()=>({width:ee(e.inputWidth),height:ee(e.buttonSize)})),_=V(()=>$e(e.buttonSize)),f=()=>{const a=i(s.value);R(a,s.value)||(s.value=a)},d=a=>{e.beforeChange?Ve(e.beforeChange,{args:[a],done(){s.value=a}}):s.value=a},S=()=>{if(g==="plus"&&o.value||g==="minus"&&t.value){n("overlimit",g);return}const a=g==="minus"?-e.step:+e.step,h=i(Pe(+s.value,a));d(h),n(g)},G=a=>{const h=a.target,{value:$}=h,{decimalLength:A}=e;let v=ne(String($),!e.integer);if(ae(A)&&v.includes(".")){const Q=v.split(".");v=`${Q[0]}.${Q[1].slice(0,+A)}`}e.beforeChange?h.value=String(s.value):R($,v)||(h.value=v);const fe=v===String(+v);d(fe?+v:v)},M=a=>{var h;e.disableInput?(h=u.value)==null||h.blur():n("focus",a)},U=a=>{const h=a.target,$=i(h.value);h.value=String($),s.value=$,ke(()=>{n("blur",a),ye()})};let E,c;const y=()=>{c=setTimeout(()=>{S(),y()},dt)},he=()=>{e.longPress&&(E=!1,clearTimeout(c),c=setTimeout(()=>{E=!0,S(),y()},mt))},X=a=>{e.longPress&&(clearTimeout(c),E&&j(a))},ge=a=>{e.disableInput&&j(a)},J=a=>({onClick:h=>{j(h),g=a,S()},onTouchstartPassive:()=>{g=a,he()},onTouchend:X,onTouchcancel:X});return T(()=>[e.max,e.min,e.integer,e.decimalLength],f),T(()=>e.modelValue,a=>{R(a,s.value)||(s.value=i(a))}),T(s,a=>{n("update:modelValue",a),n("change",a,{name:e.name})}),Y(()=>e.modelValue),()=>l("div",{role:"group",class:O([e.theme])},[z(l("button",W({type:"button",style:_.value,class:[O("minus",{disabled:t.value}),{[te]:!t.value}],"aria-disabled":t.value||void 0},J("minus")),null),[[K,e.showMinus]]),z(l("input",{ref:u,type:e.integer?"tel":"text",role:"spinbutton",class:O("input"),value:s.value,style:r.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":s.value,onBlur:U,onInput:G,onFocus:M,onMousedown:ge},null),[[K,e.showInput]]),z(l("button",W({type:"button",style:_.value,class:[O("plus",{disabled:o.value}),{[te]:!o.value}],"aria-disabled":o.value||void 0},J("plus")),null),[[K,e.showPlus]])])}});const ft=F(gt);const pt=P({emits:{},props:{list:Array},methods:{toDetail(e){this.$router.push("/detail/"+e)}}});const _t={class:"proList"},vt={class:"left"},bt=["onClick"],Ct={class:"itemImage"},$t={class:"itemInfo"},kt={class:"itemTitle van-multi-ellipsis--l2"},yt={class:"itemPrice"},Vt={class:"right"},Pt=["onClick"],St={class:"itemImage"},Lt={class:"itemInfo"},wt={class:"itemTitle van-multi-ellipsis--l2"},Bt={class:"itemPrice"};function Dt(e,n,i,m,g,u){const s=Se;return C(),k("div",_t,[p("ul",vt,[(C(!0),k(I,null,H(e.list,(t,o)=>(C(),k("li",{key:t.proid,onClick:r=>e.toDetail(t.proid)},[o%2===0?(C(),k(I,{key:0},[p("div",Ct,[l(s,{src:t.img1},null,8,["src"])]),p("div",$t,[p("div",kt,D(t.proname),1),p("div",yt,[x(" \uFFE5"+D((t.originprice.toFixed(2)+"").split(".")[0])+".",1),p("span",null,D((t.originprice.toFixed(2)+"").split(".")[1]),1)])])],64)):se("",!0)],8,bt))),128))]),p("ul",Vt,[(C(!0),k(I,null,H(e.list,(t,o)=>(C(),k("li",{key:t.proid,onClick:r=>e.toDetail(t.proid)},[o%2===1?(C(),k(I,{key:0},[p("div",St,[l(s,{src:t.img1},null,8,["src"])]),p("div",Lt,[p("div",wt,D(t.proname),1),p("div",Bt,[x(" \uFFE5 "+D((t.originprice.toFixed(2)+"").split(".")[0])+".",1),p("span",null,D((t.originprice.toFixed(2)+"").split(".")[1]),1)])])],64)):se("",!0)],8,Pt))),128))])])}const It=ue(pt,[["render",Dt],["__scopeId","data-v-a5d3edec"]]),xt=P({components:{ProComponent:It},data(){return{carList:[],id:"",checked:!1,proList:[]}},mounted(){localStorage.getItem("userid")?this.getCartList():this.$router.push("/login"),Le().then(e=>{this.proList=e.data.data})},computed:{empty(){return this.carList.length===0},totalNum(){return this.carList.reduce((e,n)=>n.flag?e+=n.num:e+=0,0)},totalPrice(){return this.carList.reduce((e,n)=>n.flag?e+=n.num*n.originprice:e+=0,0)*100}},methods:{getCartList(){we({userid:localStorage.getItem("userid")}).then(e=>{e.data.code==="10020"?this.carList=[]:(this.carList=e.data.data,this.checked=this.carList.every(n=>n.flag))})},beforeClose({position:e}){switch(e){case"right":return new Promise(n=>{Be.confirm({title:"Are you sure you want to delete this?"}).then(()=>{De({cartid:this.id}).then(()=>{this.getCartList(),this.id="",n()})})});case"outside":return!0}},getDeleteId(e){this.id=e},updateNum({cartid:e,num:n}){Ie({cartid:e,num:n}).then(()=>{this.getCartList()})},changeType(){xe({userid:localStorage.getItem("userid"),type:this.checked}).then(e=>{this.checked=this.carList.every(n=>n.flag),this.getCartList()})},selectOne({cartid:e,flag:n}){Ne({cartid:e,flag:n}).then(()=>{this.getCartList()})},submit(){(event==null?void 0:event.target).tagName==="BUTTON"&&Ee({userid:localStorage.getItem("userid")}).then(e=>{this.$router.push("/order?time="+e.data.time)})}}});const Nt={class:"header"},Et={class:"content"},Tt={key:0,class:"no-shop"},Ft=x("\u7ACB\u5373\u8D2D\u7269"),At=x(" \u5FEB\u70B9\u6765\u770B\u770B "),Ot={key:1,class:"shop-list"},Rt=x(" \u53EF\u80FD\u4F60\u60F3\u8981 "),Gt=x("\u5168\u9009");function Mt(e,n,i,m,g,u){const s=Te,t=Fe,o=Ae,r=ut,_=Me("ProComponent"),f=qe,d=at,S=ft,G=Oe,M=rt,U=Re,E=Ge;return C(),k(I,null,[p("header",Nt,[l(s,{title:"\u8D2D\u7269\u8F66","left-arrow":"",onClickLeft:n[0]||(n[0]=c=>e.$router.back())})]),p("div",Et,[e.empty?(C(),k("div",Tt,[l(o,{description:"\u8D2D\u7269\u8F66\u7A7A\u7A7A\u5982\u4E5F"},{default:b(()=>[l(t,{round:"",type:"danger",class:"bottom-button",onClick:n[1]||(n[1]=c=>e.$router.push("/kind"))},{default:b(()=>[Ft]),_:1})]),_:1}),l(r,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},{default:b(()=>[At]),_:1}),l(_,{list:e.proList},null,8,["list"])])):(C(),k("div",Ot,[(C(!0),k(I,null,H(e.carList,c=>(C(),Ue(U,{key:c.cartid,"before-close":e.beforeClose},{right:b(()=>[l(t,{square:"",text:"\u5220\u9664",type:"danger",onClick:y=>e.getDeleteId(c.cartid),class:"delete-button"},null,8,["onClick"])]),default:b(()=>[l(M,{class:"myItem"},{default:b(()=>[l(d,{span:"2"},{default:b(()=>[l(f,{modelValue:c.flag,"onUpdate:modelValue":y=>c.flag=y,onChange:y=>e.selectOne(c)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l(d,{span:"22"},{default:b(()=>[l(G,{price:c.originprice,title:c.proname,thumb:c.img1},{num:b(()=>[l(S,{modelValue:c.num,"onUpdate:modelValue":y=>c.num=y,theme:"round","button-size":"22","disable-input":"",onChange:y=>e.updateNum(c)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["price","title","thumb"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["before-close"]))),128)),l(r,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},{default:b(()=>[Rt]),_:1}),l(_,{list:e.proList},null,8,["list"]),l(E,{onClick:e.submit,capture:"",stop:"",disabled:e.totalNum===0,price:e.totalPrice,"button-text":e.totalNum>0?`\u53BB\u7ED3\u7B97(${e.totalNum})`:"\u53BB\u7ED3\u7B97"},{default:b(()=>[l(f,{modelValue:e.checked,"onUpdate:modelValue":n[2]||(n[2]=c=>e.checked=c),onClick:e.changeType,stop:"",capture:""},{default:b(()=>[Gt]),_:1},8,["modelValue","onClick"])]),_:1},8,["onClick","disabled","price","button-text"])]))])],64)}const zt=ue(xt,[["render",Mt]]);export{zt as default};
